@page "/signalr"
@using Microsoft.AspNetCore.SignalR
@inject IHubContext<ChatHub> _hubContext;

<PageTitle>Signal R</PageTitle>

<MatH5>Signal R</MatH5>

<MatButton Raised="true" OnClick="SendNewMessage">Send A New Message</MatButton>

<ul class="mdc-list" style="" aria-orientation="vertical" id="messageEvents">

</ul>

@code {

    public class Message
    {
        public string? Text { get; set; }

        public DateTimeOffset? Date { get; set; }
    }

    private Task SendNewMessage()
    {
        return _hubContext.Clients.All.SendAsync("broadcastMessage", new Message
        {
            Date = DateTimeOffset.UtcNow,
            Text = $"Hello from server {Guid.NewGuid()}"
        });
    }

}